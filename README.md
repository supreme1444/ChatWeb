# Описание приложения

## Общее описание
Это приложение представляет собой **чат-платформу**, которая позволяет пользователям обмениваться сообщениями в реальном времени через WebSocket. Приложение поддерживает:
- **Приватные чаты** между двумя пользователями.
- **Групповые чаты** с несколькими участниками.
- **Синхронизацию сообщений** между несколькими устройствами (как в Telegram Web).
- **Аутентификацию пользователей** через JWT-токены.

Приложение построено на **FastAPI** и использует **SQLAlchemy** для работы с базой данных. Для хранения данных используется **SQLite** (в памяти для тестов).

---

## Основные функции

### 1. **Регистрация и аутентификация**
- Пользователи могут зарегистрироваться, указав имя пользователя, email и пароль.
- После регистрации пользователь получает JWT-токен для доступа к API.

### 2. **Приватные чаты**
- Пользователи могут создавать приватные чаты с другими пользователями.
- Сообщения в приватных чатах видны только участникам чата.

### 3. **Групповые чаты**
- Пользователи могут создавать групповые чаты и добавлять участников.
- Сообщения в групповых чатах видны всем участникам группы.

### 4. **WebSocket**
- Приложение использует WebSocket для обмена сообщениями в реальном времени.
- Поддерживается подключение нескольких устройств к одному чату.
- Поддерживается получение сообщений если user вышел из чата но ему пришло сообщение.При подключении он получает пропущенные сообщения.
-  
---

## Запуск приложения

### 1. **Установка и работа с прииложением**
- Заполнить в .env подключение к базе ввести пароль и user
- Заполнить в alembic ini строку sqlalchemy.url
- Поднять докера docker-compose up --build и если сервис web не сделал миграцию автоматически, запустить его еще раз.
- Далее uvicorn main:app --reload
- Работа с WebSocket велась через piehost.com.В URL запросе пишем ws://localhost:8000/chat/id чата?token=... .Если создается private комната  то берем его id из таблицы "chats".
  Если group комната то из таблицы  "groups".
- Перед работами с чатом нужно их создавать
- Если создаем приватный чато то пишем имя чата и id юзера с кем хотим обащться. Если создаем групповой чат то пишем имя чата id создателя и через запятую id тех кто будет в нем учавствовать.  
